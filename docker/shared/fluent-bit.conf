[SERVICE]
    Flush         1
    Log_Level     info
    Daemon        off
    Parsers_File  parsers.conf
    HTTP_Server   On
    HTTP_Listen   0.0.0.0
    HTTP_Port     2020

[INPUT]
    Name              tail
    Path              /var/log/*.log
    Parser            json
    Tag               claude.*
    Refresh_Interval  5

[INPUT]
    Name              tail
    Path              /var/log/boss/*.log
    Parser            json
    Tag               boss.*
    Refresh_Interval  5

[INPUT]
    Name              tail
    Path              /var/log/subordinate/*.log
    Parser            json
    Tag               subordinate.*
    Refresh_Interval  5

[FILTER]
    Name                kubernetes
    Match               *
    Kube_URL            https://kubernetes.default.svc:443
    Kube_CA_File        /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
    Kube_Token_File     /var/run/secrets/kubernetes.io/serviceaccount/token
    Kube_Tag_Prefix     kube.var.log.containers.
    Merge_Log           On
    Keep_Log            Off

[OUTPUT]
    Name  es
    Match *
    Host  elasticsearch
    Port  9200
    Index claude-logs
    Type  _doc
    Logstash_Format On
    Logstash_Prefix claude
    Logstash_DateFormat %Y.%m.%d
    Include_Tag_Key On
    Tag_Key @tag